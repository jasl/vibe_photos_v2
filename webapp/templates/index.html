{% extends "base.html" %}

{% block title %}Photo Gallery - AI Photos Management{% endblock %}

{% block content %}
<div class="stats">
    <h2>Photo Gallery</h2>
    <p>Total Photos: {{ total_photos }} | Page {{ page }} of {{ total_pages }}</p>
</div>

<div class="grid">
    {% for photo in photos %}
    <div class="card">
        <a href="/photo/{{ photo.id }}">
            <img src="/thumbnail/{{ photo.id }}" alt="{{ photo.filename }}" loading="lazy">
        </a>
        <div class="card-content">
            <h3 style="font-size: 0.875rem; margin-bottom: 0.5rem;">{{ photo.filename }}</h3>
            <p style="font-size: 0.75rem; color: #666;">
                {{ photo.created_at.strftime('%Y-%m-%d %H:%M') }}
            </p>
        </div>
    </div>
    {% endfor %}
</div>

{% if total_pages > 1 %}
<div class="pagination">
    {% if page > 1 %}
        <a href="/?page={{ page - 1 }}">← Previous</a>
    {% endif %}
    
    {% for p in range(1, total_pages + 1) %}
        {% if p == page %}
            <a href="/?page={{ p }}" class="active">{{ p }}</a>
        {% elif p == 1 or p == total_pages or (p >= page - 2 and p <= page + 2) %}
            <a href="/?page={{ p }}">{{ p }}</a>
        {% elif p == page - 3 or p == page + 3 %}
            <span>...</span>
        {% endif %}
    {% endfor %}
    
    {% if page < total_pages %}
        <a href="/?page={{ page + 1 }}">Next →</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}

